{"version":3,"sources":["HomePage.js","Person.js","api/getDataFromUrl.js","PeopleTable.js","api/peopleUrl.js","App.js","index.js"],"names":["HomePage","react_default","a","createElement","react_router_dom","className","to","classNames","require","Person","_ref","person","selectedPerson","history","useHistory","location","useLocation","Person--male","sex","Person--female","concat","century","Person--selected","name","toLowerCase","onClick","push","pathname","split","join","search","id","born-before-1650","born","died","mother","father","lived-for-65-and-more","age","getDataFromUrl","url","responsePromise","data","regenerator_default","async","_context","prev","next","awrap","fetch","sent","json","abrupt","stop","withRouter","match","useRouteMatch","params","URLSearchParams","_useState","useState","undefined","_useState2","Object","slicedToArray","setSelectedPerson","_useState3","get","_useState4","filterBy","setFilterBy","_useState5","_useState6","visibleQuery","setVisibleQuery","_useState7","_useState8","people","setPeople","_useState9","_useState10","activeSortMethod","setActiveSortMethod","useEffect","then","peopleFromServer","map","index","objectSpread2","Math","ceil","toString","sortBy","visiblePeople","useMemo","filterPeopleToFilterBy","filter","includes","length","sort","b","localeCompare","debouncedInputHandler","useCallback","callback","delay","timer","clearTimeout","_len","arguments","args","Array","_key","setTimeout","apply","debounce","inputValue","set","trim","delete","Fragment","value","placeholder","type","onChange","event","target","tableHeading","key","append","src_Person","App","react_router","exact","path","component","PeopleTable","ReactDOM","render","basename","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.b5b475c6.chunk.js","sourcesContent":["import React from 'react';\nimport {\n  Link,\n} from 'react-router-dom';\n\nconst HomePage = () => (\n  <Link className=\"button\" to=\"/people/\">Download People table</Link>\n);\n\nexport default HomePage;\n","import React from 'react';\nimport { useHistory,\n  useLocation } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nconst classNames = require('classnames');\n\nconst Person = ({ person, selectedPerson }) => {\n  const history = useHistory();\n  const location = useLocation();\n\n  return (\n    <tr\n      className={\n        classNames(\n          [{ 'Person--male': person.sex === 'm' },\n            { 'Person--female': person.sex === 'f' },\n            `Person--lived-in-${person.century}`,\n            'Person',\n            { 'Person--selected': (\n              selectedPerson === person.name.toLowerCase()\n            ) },\n          ]\n        )\n      }\n      onClick={() => {\n        history.push({\n          pathname: `${person.name.split(' ').join('-').toLowerCase()}`,\n          search: location.search,\n        });\n      }}\n    >\n\n      <td className=\"PeopleTable__description\">{person.id}</td>\n      <td className={classNames([{ 'born-before-1650': person.born < 1650 }])}>\n        {person.name}\n      </td>\n      <td className=\"PeopleTable__description\">{person.sex}</td>\n      <td className=\"PeopleTable__description\">{person.born}</td>\n      <td className=\"PeopleTable__description\">{person.died}</td>\n      <td className=\"PeopleTable__description\">{person.mother}</td>\n      <td className=\"PeopleTable__description\">{person.father}</td>\n      <td className={classNames(\n        [{ 'lived-for-65-and-more': person.age >= 65 },\n          'PeopleTable__description']\n      )}\n      >\n        {person.age}\n      </td>\n      <td className={classNames(['PeopleTable__description'])}>\n        {person.century}\n      </td>\n    </tr>\n  );\n};\n\nPerson.propTypes = {\n  person: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    sex: PropTypes.string.isRequired,\n    born: PropTypes.number.isRequired,\n    died: PropTypes.number.isRequired,\n    mother: PropTypes.string,\n    father: PropTypes.string,\n    century: PropTypes.number.isRequired,\n    age: PropTypes.number.isRequired,\n  }).isRequired,\n  selectedPerson: PropTypes.string.isRequired,\n};\n\nexport default Person;\n","const getDataFromUrl = async(url) => {\n  const responsePromise = await fetch(url);\n  const data = await responsePromise.json();\n\n  return data;\n};\n\nexport default getDataFromUrl;\n","import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { withRouter, useHistory,\n  useLocation, useRouteMatch } from 'react-router-dom';\nimport Person from './Person';\nimport getDataFromUrl from './api/getDataFromUrl';\nimport peopleUrl from './api/peopleUrl';\n\nconst PeopleTable = () => {\n  const match = useRouteMatch();\n  const location = useLocation();\n  const history = useHistory();\n\n  const params = new URLSearchParams(location.search);\n  const [selectedPerson, setSelectedPerson] = useState(\n    match.params.person !== undefined\n      ? match.params.person.split('-').join(' ') : ''\n  );\n\n  const [filterBy, setFilterBy] = useState(\n    params.get('query') !== null ? params.get('query') : ''\n  );\n  const [visibleQuery, setVisibleQuery] = useState('');\n\n  const [people, setPeople] = useState([]);\n  const [activeSortMethod, setActiveSortMethod] = useState(\n    params.get('sortBy') !== null ? params.get('sortBy') : ''\n  );\n\n  useEffect(\n    () => {\n      getDataFromUrl(peopleUrl)\n        .then((peopleFromServer) => {\n          setPeople(\n            peopleFromServer\n              .map(\n                (person, index) => ({\n                  ...person,\n                  id: index + 1,\n                  age: person.died - person.born,\n                  century: Math.ceil(person.died / 100),\n                })\n              )\n          );\n        });\n    }\n    , []\n  );\n\n  useEffect(() => {\n    setActiveSortMethod(params.get('sortBy'));\n  }, [params.toString()]);\n  useEffect(() => {\n    setSelectedPerson(\n      match.params.person !== undefined\n        ? match.params.person.split('-').join(' ') : ''\n    );\n  }, [match.params.person]);\n\n  const getSortMethod = (sortBy) => {\n    if (sortBy === '') {\n      return () => 1;\n    }\n\n    if (typeof people[0][sortBy] === 'string') {\n      return (a, b) => a[sortBy].localeCompare(b[sortBy]);\n    }\n\n    return (a, b) => a[sortBy] - b[sortBy];\n  };\n\n  const getFilteredPeople = (peopleToFilter, filterPeopleToFilterBy) => (\n    peopleToFilter.filter(\n      person => (person.name + person.mother + person.father)\n        .toLowerCase().includes(filterPeopleToFilterBy)\n    ));\n\n  const visiblePeople = useMemo(() => getFilteredPeople(people, filterBy),\n    [filterBy, people]);\n\n  if (visiblePeople.length > 0) {\n    visiblePeople.sort(getSortMethod(activeSortMethod));\n  }\n\n  const debounce = (callback, delay) => {\n    let timer = 0;\n\n    return (...args) => {\n      clearTimeout(timer);\n      timer = setTimeout(callback, delay, ...args);\n    };\n  };\n\n  const inpuHandler = (inputValue) => {\n    params.set('query', inputValue.trim().toLowerCase());\n    if (inputValue.trim().toLowerCase().length === 0) {\n      params.delete('query');\n    }\n\n    history.push({\n      search: `?${params.toString()}`,\n    });\n    setFilterBy(inputValue.trim().toLowerCase());\n  };\n\n  const debouncedInputHandler = useCallback(debounce(inpuHandler, 1000), []);\n\n  return (\n    <>\n\n      <h1>People table</h1>\n      <p>\n          number of currently visible people\n        {' '}\n        {visiblePeople.length}\n      </p>\n      <input\n        value={visibleQuery}\n        placeholder=\"type for filtering\"\n        type=\"text\"\n        className=\"input input_search-in-table\"\n        onClick={() => {\n          setFilterBy('');\n        }}\n        onChange={(event) => {\n          setVisibleQuery(event.target.value);\n          debouncedInputHandler(event.target.value);\n        }}\n      />\n      <table className=\"PeopleTable\">\n        <thead className=\"PeopleTable__head\">\n          <tr className=\"PeopleTable__row\">\n            {['id',\n              'name',\n              'sex',\n              'born',\n              'died',\n              'mother',\n              'father',\n              'age',\n              'century',\n            ].map(\n              tableHeading => (\n                <th\n                  key={tableHeading}\n                  className=\"PeopleTable__heading\"\n                  onClick={() => {\n                    if (tableHeading !== 'mother'\n                      && tableHeading !== 'father') {\n                      params.delete('sortBy');\n                      params.append('sortBy', tableHeading);\n                      history.push({\n                        search: `?${params.toString()}`,\n                      });\n                      setActiveSortMethod(tableHeading);\n                    }\n                  }}\n\n                >\n                  {tableHeading}\n                </th>\n              )\n            )}\n          </tr>\n        </thead>\n        <tbody className=\"PeopleTable__body\">\n          {visiblePeople\n            .map(\n              person => (\n                <Person\n                  person={person}\n                  key={person.id}\n                  selectedPerson={selectedPerson}\n                />\n              )\n            )}\n        </tbody>\n      </table>\n    </>\n  );\n};\n\nexport default withRouter(PeopleTable);\n","// eslint-disable-next-line max-len\nconst peopleUrl = 'https://mate-academy.github.io/react_people-table/api/people.json';\n\nexport default peopleUrl;\n","import React from 'react';\nimport './App.scss';\nimport {\n  Route,\n} from 'react-router-dom';\n\nimport HomePage from './HomePage';\nimport PeopleTable from './PeopleTable';\n\nconst App = () => (\n  <div className=\"App\">\n    <Route exact path=\"/\" component={HomePage} />\n    <Route path=\"/people/:person?\" component={PeopleTable} />\n  </div>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <HashRouter basename=\"/react_people-table\">\n    <App />\n  </HashRouter>\n  , document.getElementById('root')\n);\n"],"sourceRoot":""}