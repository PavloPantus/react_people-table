(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(33)},25:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),l=a(6),s=(a(25),a(5)),i=function(){return r.a.createElement(l.b,{className:"button",to:"/people/"},"Download People table")},u=a(19),p=a(8),m=a(31),b=function(e){var t=e.person,a=e.selectedPerson,n=Object(s.e)(),c=Object(s.f)();return r.a.createElement("tr",{className:m([{"Person--male":"m"===t.sex},{"Person--female":"f"===t.sex},"Person--lived-in-".concat(t.century),"Person",{"Person--selected":a===t.name.toLowerCase()}]),onClick:function(){n.push({pathname:"".concat(t.name.split(" ").join("-").toLowerCase()),search:c.search})}},r.a.createElement("td",{className:"PeopleTable__description"},t.id),r.a.createElement("td",{className:m([{"born-before-1650":t.born<1650}])},t.name),r.a.createElement("td",{className:"PeopleTable__description"},t.sex),r.a.createElement("td",{className:"PeopleTable__description"},t.born),r.a.createElement("td",{className:"PeopleTable__description"},t.died),r.a.createElement("td",{className:"PeopleTable__description"},t.mother),r.a.createElement("td",{className:"PeopleTable__description"},t.father),r.a.createElement("td",{className:m([{"lived-for-65-and-more":t.age>=65},"PeopleTable__description"])},t.age),r.a.createElement("td",{className:m(["PeopleTable__description"])},t.century))},d=a(10),f=a.n(d),h=function(e){var t,a;return f.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(fetch(e));case 2:return t=n.sent,n.next=5,f.a.awrap(t.json());case 5:return a=n.sent,n.abrupt("return",a);case 7:case"end":return n.stop()}})},E=Object(s.h)(function(){var e=Object(s.g)(),t=Object(s.f)(),a=Object(s.e)(),c=new URLSearchParams(t.search),o=Object(n.useState)(void 0!==e.params.person?e.params.person.split("-").join(" "):""),l=Object(p.a)(o,2),i=l[0],m=l[1],d=Object(n.useState)(null!==c.get("query")?c.get("query"):""),f=Object(p.a)(d,2),E=f[0],j=f[1],_=Object(n.useState)(""),g=Object(p.a)(_,2),y=g[0],P=g[1],O=Object(n.useState)([]),v=Object(p.a)(O,2),w=v[0],N=v[1],T=Object(n.useState)(null!==c.get("sortBy")?c.get("sortBy"):""),C=Object(p.a)(T,2),x=C[0],S=C[1];Object(n.useEffect)(function(){h("https://mate-academy.github.io/react_people-table/api/people.json").then(function(e){N(e.map(function(e,t){return Object(u.a)({},e,{id:t+1,age:e.died-e.born,century:Math.ceil(e.died/100)})}))})},[]),Object(n.useEffect)(function(){S(c.get("sortBy"))},[c.toString()]),Object(n.useEffect)(function(){m(void 0!==e.params.person?e.params.person.split("-").join(" "):"")},[e.params.person]);var k,L=Object(n.useMemo)(function(){return e=E,w.filter(function(t){return(t.name+t.mother+t.father).toLowerCase().includes(e)});var e},[E,w]);L.length>0&&L.sort(""===(k=x)?function(){return 1}:"string"===typeof w[0][k]?function(e,t){return e[k].localeCompare(t[k])}:function(e,t){return e[k]-t[k]});var B=Object(n.useCallback)(function(e,t){var a=0;return function(){clearTimeout(a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];a=setTimeout.apply(void 0,[e,t].concat(r))}}(function(e){c.set("query",e.trim().toLowerCase()),0===e.trim().toLowerCase().length&&c.delete("query"),a.push({search:"?".concat(c.toString())}),j(e.trim().toLowerCase())},1e3),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"People table"),r.a.createElement("p",null,"number of currently visible people"," ",L.length),r.a.createElement("input",{value:y,placeholder:"type for filtering",type:"text",className:"input input_search-in-table",onClick:function(){j("")},onChange:function(e){P(e.target.value),B(e.target.value)}}),r.a.createElement("table",{className:"PeopleTable"},r.a.createElement("thead",{className:"PeopleTable__head"},r.a.createElement("tr",{className:"PeopleTable__row"},["id","name","sex","born","died","mother","father","age","century"].map(function(e){return r.a.createElement("th",{key:e,className:"PeopleTable__heading",onClick:function(){"mother"!==e&&"father"!==e&&(c.delete("sortBy"),c.append("sortBy",e),a.push({search:"?".concat(c.toString())}),S(e))}},e)}))),r.a.createElement("tbody",{className:"PeopleTable__body"},L.map(function(e){return r.a.createElement(b,{person:e,key:e.id,selectedPerson:i})}))))}),j=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s.a,{exact:!0,path:"/",component:i}),r.a.createElement(s.a,{path:"/people/:person?",component:E}))};o.a.render(r.a.createElement(l.a,{basename:"/react_people-table"},r.a.createElement(j,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.b5b475c6.chunk.js.map